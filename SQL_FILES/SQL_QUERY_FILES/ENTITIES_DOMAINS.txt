CREATE TABLE `entities_domains` (
  `orgId` int(11) unsigned DEFAULT NULL,
  `entityId` int(11) unsigned DEFAULT NULL,
  `domainId` int(11) unsigned NOT NULL,
  `defaultCategory` varchar(255) DEFAULT NULL,
  `expiryDate` datetime DEFAULT NULL,
  `isFavorite` tinyint(1) DEFAULT '0',
  `label` varchar(255) DEFAULT NULL,
  `description` text,
  `category` enum('NONE','MODERATE','HIGH','ADMIN') DEFAULT NULL,
  `numLicenses` int(11) DEFAULT NULL,
  `annualCost` decimal(8,2) DEFAULT NULL,
  `optimalUsage` decimal(8,2) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `categoryId` int(11) unsigned DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  UNIQUE KEY `entities_domains_orgid_entityid_domainid_unique` (`orgId`,`entityId`,`domainId`),
  KEY `entities_domains_orgid_index` (`orgId`),
  KEY `entities_domains_entityid_index` (`entityId`),
  KEY `entities_domains_domainid_index` (`domainId`),
  KEY `entities_domains_isfavorite_index` (`isFavorite`),
  KEY `entities_domains_label_index` (`label`(191)),
  KEY `entities_domains_category_index` (`category`),
  KEY `entities_domains_categoryid_index` (`categoryId`),
  KEY `idx_numlicenses` (`numLicenses`),
  KEY `idx_optimalusage` (`optimalUsage`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
